!function(){function n(a,g){return(/string|function/.test(typeof g)?k:b)(a,g)}function r(a,g){return"string"!=typeof a&&(g=typeof a,"number"===g?a+="":a="function"===g?r(a.call(a)):""),a}function a(a){return l[a]}function b(a,g){var b=n.get(a)||f({filename:a,name:"Render Error",message:"Template not found"});return g?b(g):b}function k(a,g){if("string"==typeof g){var b=g;g=function(){return new m(b)}}var p=c[a]=function(h){try{return new g(h,a)+""}catch(d){return f(d)()}};return p.prototype=g.prototype=
q,p.toString=function(){return g+""},p}function f(a){var g=a.stack||"";if(g)g=g.split("\n").slice(0,2).join("\n");else for(var b in a)g+="<"+b+">\n"+a[b]+"\n\n";return function(){return"object"==typeof console&&console.error("{Template Error}\n\n"+g),"{Template Error}"}}var c=n.Y={},m=this.W,l={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},s=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},q=n.ha={c:{},V:function(a,g,f){var p=a,h=/(\/)[^/]+\1\.\.\1/;f=("./"+
f).replace(/[^/]+$/,"")+p;for(f=f.replace(/\/\.\//g,"/");f.match(h);)f=f.replace(h,"/");return a=f,b(a,g)},n:r,f:function(u){return r(u).replace(/&(?![\w#]+;)|[<>"']/g,a)},m:function(a,g){if(s(a))for(var f=0,p=a.length;p>f;f++)g.call(a,a[f],f,a);else for(f in a)g.call(a,a[f],f)}},t=n.ca=q.c;n.get=function(a){return c[a.replace(/^\.\//,"")]};n.ba=function(a,g){t[a]=g};"function"==typeof define?define(function(){return n}):"undefined"!=typeof exports&&(module.Z=n);n("formArrayControlItemTemplate",function(a){var g=
(this.c,this.n),f=a.r;a=a.s;var p="";return p+='<br/> <span class="form-array-li"> ',p+=g(f),p+=" ",a&&(p+=' <a href="javascript:;" class="form-icon form-item-remove" title="\u79fb\u9664"><i class="mf-iconfont">&#xf0153;</i></a> '),p+=" </span>",new m(p)});n("formArrayTemplate",function(a){var g=(this.c,this.f),f=a.data,p=a.s,h=a.d,d=a.S,e=a.T,b=this.n;a=a.K;var c="";return c+='<span class="form-array-ul formitem-control ',c+=g(f.a),c+='" type="array"> ',p&&(c+=' <a href="javascript:;" class="form-icon form-item-add" title="\u65b0\u589e" data-p="',
c+=g(h),c+='" data-newtemplate="',c+=g(d),c+='"><i class="mf-iconfont">&#xf0154;</i></a> '),c+=" ",e&&(c+=" ",c+=b(a),c+=" "),c+=" </span>",new m(c)});n("formControlCheckboxTemplate",function(a){var g=(this.c,this.f),c=a.data,f=this.m,h=(a.C,a.u,a.i),d="";return d+='<span class="formitem-control ',d+=g(c.a),d+=' formitem-checkbox" type="checkbox" data-order="',d+=g(c.b),d+='"> ',f(c.options,function(a){d+=' <input data-listitem="';d+=g(h);d+='" class="formitem-checkbox" placeholder="';d+=g(a.placeholder);
d+='" ';d+=g(a.disabled);d+=" ";d+=g(a.l);d+=" ";d+=g(a.e);d+=" ";d+=g(a.t);d+=' checked="';d+=g(a.checked);d+='" ';d+=g(a.status);d+=' type="checkbox" id="formitem-radio-';d+=g(a.label.title);d+='"><label class="formitem-checkbox-label" for="formitem-radio-';d+=g(a.label.title);d+='" ';d+=g(a.label.e);d+=">";d+=g(a.label.title);d+="</label> "}),d+=" </span>",new m(d)});n("formControlHashTemplate",function(a){var g=(this.c,this.n),c=a.Q;a=a.r;var f="";return f+='<span class="form-array-li w45p">',
f+=g(c),f+='</span> <span class="form-array-li w45p">',f+=g(a),f+="</span>",new m(f)});n("formControlInputConfigTemplate",function(a){var g=(this.c,this.f),f=a.i,c=a.d,h=a.data,d=a.options;a=a.t;var e="";return e+='<input data-listitem="',e+=g(f),e+='" id="formitem-',e+=g(c),e+='" class="formitem-control formitem-input ',e+=g(h.a.control),e+='" style="',e+=g(h.style.control),e+='" placeholder="',e+=g(h.placeholder),e+='" ',e+=g(d.status),e+=" ",e+=g(h.l),e+=' data-flag="',e+=g(a),e+='" ',e+=g(h.disabled),
e+=" ",e+=g(h.e),e+=' data-order="',e+=g(h.b),e+='" type="',e+=g(h.control),e+='" value="',e+=g(h.value),e+='">',new m(e)});n("formControlInputTemplate",function(a){var g=(this.c,this.f),f=a.i,c=a.d,h=a.data,d=a.options;a=a.t;var e="";return e+='<input data-listitem="',e+=g(f),e+='" id="formitem-',e+=g(c),e+='" class="formitem-control formitem-input ',e+=g(h.a),e+='" style="',e+=g(h.style),e+='" ',e+=g(d.status),e+=' data-flag="',e+=g(a),e+='" placeholder="',e+=g(h.placeholder),e+='" ',e+=g(h.l),
e+=" ",e+=g(h.e),e+=' value="',e+=g(h.value),e+='" type="',e+=g(h.control),e+='">',new m(e)});n("formControlObjectTemplate",function(a){var g=(this.c,this.f),f=a.d;a=a.U;var c="";return c+='<a href="javascript:;" class="form-icon form-item-detail formitem-control" for="formitem-',c+=g(f),c+='" data-mf-val="',c+=g(a),c+='" title="\u8be6\u7ec6\u8bbe\u5b9a"><i class="mf-iconfont">&#xf00e1;</i></a>',new m(c)});n("formControlRadioTemplate",function(a){var g=(this.c,this.f),c=a.data,f=this.m,h=(a.C,a.u,
a.i),d="";return d+='<span class="formitem-control ',d+=g(c.a),d+=' formitem-radio" type="radio" data-order="',d+=g(c.b),d+='"> ',f(c.options,function(a){d+=' <input type="radio" class="formitem-radio" data-listitem="';d+=g(h);d+='" placeholder="';d+=g(a.placeholder);d+='" data-flag="';d+=g(a.t);d+='" ';d+=g(a.l);d+=" ";d+=g(a.disabled);d+=" ";d+=g(a.e);d+=" ";d+=g(a.checked);d+=" ";d+=g(a.status);d+=' data-order="';d+=g(c.b);d+='" name="';d+=g(c.name);d+='" id="formitem-radio-';d+=g(a.label.title);
d+='"><label class="formitem-radio-label" for="formitem-radio-';d+=g(a.label.title);d+='" ';d+=g(a.label.e);d+=">";d+=g(a.label.title);d+="</label> "}),d+=" </span>",new m(d)});n("formControlSelectTemplate",function(a){var g=(this.c,this.f),c=a.i,f=a.d,h=a.data,d=a.options,e=this.m,b=(a.C,a.u,"");return b+='<select data-listitem="',b+=g(c),b+='" id="formitem-',b+=g(f),b+='" class="formitem-control formitem-select ',b+=g(h.a),b+='" style="',b+=g(h.style),b+='" ',b+=g(h.l),b+=" ",b+=g(d.status),b+=
" ",b+=g(h.disabled),b+=" ",b+=g(h.e),b+=' data-order="',b+=g(h.b),b+='"> ',e(h.options,function(a){b+=" ";a.group?(b+=' </optgroup> <optgroup label="',b+=g(a.text),b+='" class="formitem-selectoption formitem-selectoptiongroup"> '):(b+=' <option value="',b+=g(a.F),b+='" class="formitem-selectoption" ',b+=g(a.e),b+=">",b+=g(a.text),b+="</option> ");b+=" "}),b+=" </select>",new m(b)});n("formControlTemplate",function(a){var g=(this.c,a.N),b=this.f,c=a.options,f=this.n;a=a.R;var d="";return g&&(d+=" </div> "),
d+=' <div class="form-group ',d+=b(c.a.h),d+='" style="',d+=b(c.style.h),d+='"> ',d+=f(a),new m(d)});n("formControlTextareaTemplate",function(a){var g=(this.c,this.f),b=a.i,c=a.d,f=a.data,d=a.options;a=a.t;var e="";return e+='<textarea data-listitem="',e+=g(b),e+='" id="formitem-',e+=g(c),e+='" class="formitem-control formitem-input ',e+=g(f.a),e+='" style="',e+=g(f.style),e+='" ',e+=g(d.status),e+=' placeholder="',e+=g(f.placeholder),e+='" data-flag="',e+=g(a),e+='" ',e+=g(f.l),e+=" ",e+=g(f.disabled),
e+=" ",e+=g(f.e),e+=' data-order="',e+=g(f.b),e+='" type="',e+=g(f.control),e+='">',e+=g(f.value),e+="</textarea>",new m(e)});n("formLabelTemplate",function(a){var g=(this.c,this.f),b=a.data;a=a.d;var c="";return c+='<label class="formitem-label ',c+=g(b.label.a),c+='" style="',c+=g(b.label.style),c+='" for="formitem-',c+=g(a),c+='" data-key="',c+=g(a),c+='" ',c+=g(b.label.e),c+=">",c+=g(b.label.title),c+="</label>",new m(c)});n("formPanelTemplate",function(a){var c=(this.c,this.f),b=a.options,f=
this.m,h=(a.C,a.u,"");return h+='<div class="',h+=c(b.g.a),h+='"> <label class="formitem-label ',h+=c(b.label.a),h+='" style="',h+=c(b.label.style),h+='" ',h+=c(b.e.label),h+="></label> ",f(b.buttons,function(a){h+=" ";a.submit?(h+=' <button class="',h+=c(a.className),h+='" title="',h+=c(a.title),h+='">',h+=c(a.name),h+="</button> "):(h+=' <button class="ml15 ',h+=c(a.className),h+='" title="',h+=c(a.title),h+='">',h+=c(a.name),h+="</button> ");h+=" "}),h+=" </div>",new m(h)})}();"use strict";
(function(n){var r=function(){return{extend:function(a,b){for(var k in b)a[k]=b[k];return a},getElementsByClassName:function(a,b,k){k||(k=document);b||(b="*");var f=[];b=k.getElementsByTagName(b);a=new RegExp("(^|\\s+)"+a+"(\\s+|$)","g");k=0;for(var c=b.length;k<c;k++){var m=b[k];a.test(m.className)&&(f.push(m),a.lastIndex=0)}return f},v:function(a){return/\[object\s(\w*)\]/i.exec(Object.prototype.toString.call(a))[1]},L:function(a){var b=document.createElement("div");b.innerHTML=a;return b.children}}}();
n.ga=function(){return{G:[{name:"\u63d0\u4ea4",title:"\u63d0\u4ea4\u8868\u5355",className:"primary",submit:!0},{name:"\u53d6\u6d88",title:"\u53d6\u6d88",className:"normal"}],D:function(a){a=a||{};a.buttons||(a.buttons=magicform.G.concat());a.status=a.status||"disabled";a.M=a.M||["editable"];a.style=a.style||"";a.a=a.a||"w70p";a.label=a.label||{};a.label.style=a.label.style||"";a.label.a=a.label.a||"w20p align-right mr10p";a.h=a.h||{};a.h.style=a.h.style||"";a.h.a=a.h.a||"";a.g=a.g||{};a.g.style=a.g.style||
"";a.g.a=a.g.a||"formpanel mt30";a.q=a.q||{};a.e=a.e||{};return a},H:function(a,b,k){var f=Object.prototype.toString;a.label=a.label||{};a.label.title=a.label.title||b;a.label.a=a.label.a||k.label.a||"w20p align-right mr10p";a.label.style=a.label.style||k.label.style||"";a.a=a.a||k.a||"w70p";a.style=a.style||k.style||"";a.placeholder=a.placeholder||k.placeholder||"";if(/array/i.test(f.call(a)))for(b=0;b<a.length;b++)/object/i.test(typeof a[b])||(a[b]={value:a[b]},a[b].a=a.a||k.q.a||"w70p",a[b].style=
a.style||k.q.style||"",a[b].placeholder=a.placeholder||k.q.placeholder||"",a[b].j=1);return a},J:function(a,b,k,f){var c="",c="",c=template("formLabelTemplate")({data:a,d:k});f.label.k&&(c=f.label.k(c));return c=template("formControlTemplate")({data:a,N:b,options:f,R:c})},p:function(a,b,k,f,c){var m=Object.prototype.toString,l="",l="",l={text:"Input",checkbox:"Checkbox",radio:"Radio",select:"Select",textarea:"Textarea"}[a.control]||"Input";if(a.hash)l=template("formControl"+l+"Template")({data:a,
d:k,options:f,i:"listitem"}),f.k&&(l=f.k(l)),l=template("formControlHashTemplate")({Q:this.p(a.key,b,k,f,"listitem"),r:l});else if(/array/i.test(m.call(a))){c="editable"===f.status||"new"===f.status;for(var m="new"!==f.status,l=encodeURIComponent(JSON.stringify(a.filter(function(a){if(a.B)return a})[0])),s="",q=a.filter(function(a){if(!a.B)return a}),n=q.length-1;0<=n;n--)s+=template("formArrayControlItemTemplate")({r:this.p(q[n],b,k,f,"listitem"),s:c});l=template("formArrayTemplate")({data:a,s:c,
T:m,S:l,K:s,d:k})}else"[object Object]"===m.call(a)&&!a.j||a&&a.fa?l=template("formControlObjectTemplate")({d:k,U:encodeURIComponent(JSON.stringify(a))}):(l=template("formControl"+l+"Template")({data:a,d:k,options:f,i:c}),f.k&&(l=f.k(l)));return l},I:function(a,b,k){var f="",c="",c=0,m;for(m in b){var l=b[m].d,s=a[l],q=!1;0===c?q=!1:s.ea||(q=!0);f+=this.J(s,q,l,k);f+=this.p(s,q,l,k);c++}c=template("formPanelTemplate")({options:k});k.g.k&&(c=k.g.k(c));!k.aa||"editable"!==k.status&&"new"!==k.status||
(f+=c);return f},$:function(a,b,k){a.innerHTML=this.P(b,k);this.O(a,b,k);return this},P:function(a,b){var k=[],f=null;b=this.D(b);for(f in a)"object"!==typeof a[f]&&(a[f]={value:a[f],j:1}),this.H(a[f],f,b),k.push({d:f,b:a[f].b});k=k.sort(function(a,b){if(null===a.b||void 0===a.b||""===a.b)a.b=100;if(null===b.b||void 0===b.b||""===b.b)b.b=100;if(a.b>b.b)return!0;if(a.b<b.b)return!1});return this.I(a,k,b)},X:function(a,b){function k(b,c,k){null!=k?b.w?f[c][k]=b.w(b,c,a,k):(a[c][k]&&(b.value=a[c][k]),
f[c][k]=b):b.w?f[c]=b.w(b,c,a):(a[c]&&(b.value=a[c]),f[c]=b)}var f=r.extend({},a),c;for(c in f)if(void 0!==b[c]){var m=0;if(/array/i.test(r.v(b[c])))for(var l=0;l<b[c].length;l++)b[c][l].B?(f[c].push(b[c][l]),m++):k(b[c][l],c,l-m);else k(b[c],c)}return f},detach:function(a,b){function k(a,c,f,k){null!=k?(a[f]=a[f]||[],b[f][m].A?a[f].push(b[f][m].A(f,c,k)):a[f].push(c.value)):b[f]&&b[f].A?a[f]=b[f].A(f,c,k):c.j?a[f]=c.value||"":/object/i.test(r.v(c))&&(a[f]=c)}var f={},c;for(c in a)if(/array/i.test(r.v(a[c])))for(var m=
0;m<a[c].length;m++)a[c][m].B||k(f,a[c][m],c,m);else k(f,a[c],c);return f},o:function(a){var b=null,k=null,f=null,c=0;if(a)if(/span/i.test(a.tagName))if(b=a.getAttribute("type"),"checkbox"===b||"radio"===b){for(var m=a.querySelectorAll("input"),f=a.querySelectorAll("label"),k=[],c=0;c<m.length;c++)k.push({label:f[c].innerHTML,checked:m[c].checked?"checked":"",disabled:m[c].disabled?"disabled":""});f=parseInt(a.getAttribute("data-order"),10);isNaN(f)&&(f=null);b={j:1,control:b,name:m[0].name,options:k,
b:f}}else for(k=a.querySelectorAll(".formitem-control"),b=(b=a.querySelector(".form-item-add").getAttribute("data-newtemplate"))?[JSON.parse(decodeURIComponent(b))]:[],c=k.length-1;0<=c;c--)if(m=k[c],(f=k[c-1])&&"true"===f.getAttribute("data-flag")){var f=this.o(f),l=this.o(m);/string/i.test(typeof l)&&(l={value:l});l.j=1;l.hash=1;l.key=f;l.control=m.getAttribute("type");f=parseInt(a.getAttribute("data-order"),10);isNaN(f)&&(f=null);l.b=f;l.disabled=m.disabled?"disabled":"";b.push(l);c--}else b.push(this.o(m));
else if(/\bselect\b/i.test(a.tagName))for(m=a.querySelectorAll(".formitem-selectoption"),k=[],c=0;c<m.length;c++)/optgroup/i.test(m[c])?k.push({F:"optgroup",text:m[c].getAttribute("label")}):k.push({F:m[c].value,text:m[c].innerHTML}),f=parseInt(a.getAttribute("data-order"),10),isNaN(f)&&(f=null),b={j:1,control:"select",options:k,b:f,disabled:a.disabled?"disabled":""};else if(/\ba\b/i.test(a.tagName)){if(a=a.getAttribute("data-mf-val"))a=decodeURIComponent(a),b=JSON.parse(a)}else if(/\binput\b/i.test(a.tagName)||
/\btextarea\b/i.test(a.tagName))a.type?(f=parseInt(a.getAttribute("data-order"),10),isNaN(f)&&(f=null),b={j:1,control:a.type,value:a.value,b:f,disabled:a.disabled?"disabled":""}):b=a.value;return b},da:function(a){a=a.querySelectorAll(".form-group");for(var b={},k=0;k<a.length;k++){var f=a[k].querySelector(".formitem-label").getAttribute("data-key"),c=a[k].querySelector(".formitem-control");b[f]=this.o(c)}return b},O:function(a,b,k){function f(a){a.addEventListener("mouseover",function(){var a=this.querySelector(".form-item-remove");
a&&(a.style.visibility="visible")});a.addEventListener("mouseout",function(){var a=this.querySelector(".form-item-remove");a&&(a.style.visibility="hidden")});(a=a.querySelector(".form-item-remove"))&&c(a)}function c(a){a.addEventListener("click",function(){var a=this.parentNode.parentNode;/form-array-li/i.test(this.parentNode.previousSibling.className)&&a.removeChild(this.parentNode.previousSibling.previousSibling);a.removeChild(this.parentNode.previousSibling);a.removeChild(this.parentNode)})}k=
this.D(k);for(var m=this,l=0,n=a.querySelectorAll(".form-array-ul"),l=0;l<n.length;l++){var q=n[l].querySelector(".form-item-add");q&&function(a,c){a.addEventListener("click",function(){var b="undefined"===a.getAttribute("data-newtemplate")?null:a.getAttribute("data-newtemplate"),l=a.getAttribute("data-p");if(b){for(var b=r.L(template("formArrayControlItemTemplate")({s:!0,r:m.p(JSON.parse(decodeURIComponent(b)),!1,l,k,"listitem")})),l=c.querySelector("br"),h=null,d=null;b.length;)h=b[0],d||(d=h.querySelector("input")),
c.insertBefore(b[0],l);d&&d.focus();h&&f(h)}})}(q,n[l])}n=a.querySelectorAll(".form-array-li");for(l=0;l<n.length;l++)f(n[l]);a=a.querySelectorAll(".form-item-detail");for(l=0;l<a.length;l++){var n=a[l].getAttribute("for").replace(/formitem-/,""),t=b[n];t.onclick&&a[l].addEventListener("click",function(){t.onclick.call(this,JSON.parse(decodeURIComponent(this.getAttribute("data-mf-val"))))})}return this}}}()})(window);
