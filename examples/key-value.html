<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>key-value</title>
	<link rel="stylesheet" type="text/css" href="../assets/styles/default.css"></style>
	<link rel="stylesheet" type="text/css" href="assets/styles/component.css"></style>
</head>
<body class="confui default">
	<form id="form" class="mf" style="width:600px;margin-top:100px;display:inline-block;">
		
	</form>
	<div style="display:inline-block;">
		<button onclick="html2json()">html->json</button>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<br>
		<button onclick="json2html()">html<-json</button>
	</div>
	<textarea style="display:inline-block;width:600px;height:500px;font-size:16pt;margin-left:80px" id="jsonvalue">
			
	</textarea>
	<script type="text/javascript" src="../release/magicform-0.0.1.js"></script>
	<script type="text/javascript">
		var form = document.getElementById("form");
		var textarea = document.getElementById("jsonvalue");

		
		//纯数据
		var pureJson = {
			name:1,
			sex:2,
			学历:"",
			不喜欢上课:"",
			密码:"siemenlon",
			出生日期:"1988",
			毕业院校:"武昌理工学院",
			学科:{语文:1,数学:2},
			数字:[1,2,3,4,5],
			返回码:[
				{value:"value",key:"key"},
				{value:"value2",key:"key2"}
			]
		};
		//attach数据
		var jsonObj = {
			name:{mf:1,control:"text",disabled:"disabled"},
			学历:{mf:1,order:2,control:"radio",name:"graduate",options:[{label:"初中",checked:"checked"},{label:"高中"}]},
			不喜欢上课:{mf:1,order:0,control:"checkbox",options:[{checked:"checked",label:"十分"},{checked:"checked",label:"非常"}]},
			密码:{mf:1,control:"password"},
			出生日期:{mf:1,control:"date"},
			毕业院校:{mf:1,control:"select",options:[
				{val:"optgroup",text:"母校"},
				{text:"武昌理工学院",val:1},
				{val:"optgroup",text:"名牌"},
				{text:"清华大学",val:2},
				{val:"optgroup",text:"垃圾"},
				{text:"深职院",val:3}
			]},
			数字:[{mf:1,control:"number",fornew:1},{mf:1,control:"checkbox",options:[{checked:"checked"}]},2,3,4,5],
			返回码:[
				{mf:1,hash:1,fornew:1,control:"text",key:{mf:1,control:"text"},proc:function(dest,src){
					src.value = dest.value;
					src.key.value = dest.key;

					return src;
				}},
				{mf:1,hash:1,control:"text",value:"value",key:{mf:1,value:"key",control:"text"}},
				{mf:1,hash:1,control:"text",value:"value2",key:{mf:1,value:"key2",control:"text"}}
			]
		};
		

		function json2html(){
			try{
				jsonObj = JSON.parse(textarea.value);
			}
			catch(e){
			}
			form.innerHTML = magicform.json2html(magicform.attach(pureJson,jsonObj));
			magicform.init(form);
		}
		function html2json(){
			jsonvalue.value = JSON.stringify(magicform.html2json(form));
		}

		json2html();
	</script>
</body>
</html>