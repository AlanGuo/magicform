<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>register form</title>
	<link rel="stylesheet" type="text/css" href="../assets/styles/default.css">

	<!--common style-->
	<!--form style-->
	<link rel="stylesheet" type="text/css" href="http://115.29.195.88:93/css/default/component.css?max-age=0">
	<link rel="stylesheet" type="text/css" href="http://115.29.195.88:93/css/form.css?max-age=0">
</head>
<body class="confui default">
	<form class="mf" style="width:600px;margin:10% auto;" action="javascript:;">
		<fieldset class="lightgraybg2">
			<legend>Register</legend>
			<div id="form"></div>
		</fieldset>
	</form>
	<script type="text/javascript" src="../release/magicform-0.0.1.js"></script>
	<script type="text/javascript">
		
		var textarea = document.getElementById("jsonvalue");

		//纯数据
		var pureJson = {
			email:"",
			username:"",
			password:"",
			message:""
		};

		//attach数据
		var jsonObj = {
			email:{mf:1,control:"text",validation:"required pattern='.*@.*'"},
			password:{mf:1,control:"password",validation:"minlength=6 required"},
			username:{mf:1,validation:"required maxlength=10 minlength=4"},
			message:{mf:1,placeholder:"leave a short message",control:"textarea"}
		};
		

		function json2html(){
			var json = pureJson;
			try{
				json = JSON.parse(textarea.value);
			}
			catch(e){}


			var form = document.getElementById("form");
			magicform.generate(form,magicform.attach(json,jsonObj),{
				status:"editable",
				hasbuttons:true
				/*
				 * use default class
				classname:{
					label:"w20p align-right mr10p",
					control:"w70p"
				}
				*/
			});
		}
		function html2json(){
			jsonvalue.value = JSON.stringify(magicform.detach(magicform.html2json(form),jsonObj));
		}

		json2html();
	</script>
</body>
</html>